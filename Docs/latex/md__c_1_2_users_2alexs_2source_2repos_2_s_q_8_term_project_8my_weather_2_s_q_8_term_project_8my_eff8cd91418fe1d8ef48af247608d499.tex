\chapter{merge2}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499}{}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499}\index{merge2@{merge2}}
\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3671}%
\Hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3671}%
 Merge multiple streams into one stream in sequence or parallel.

\href{https://npmjs.org/package/merge2}{\texttt{ }} \href{https://travis-ci.org/teambition/merge2}{\texttt{ }} \href{https://npmjs.org/package/merge2}{\texttt{ }}\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3672}{}\doxysection{\texorpdfstring{Install}{Install}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3672}
Install with \href{https://npmjs.org/package/merge2}{\texttt{ npm}}


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ merge2}

\end{DoxyCode}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3673}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3673}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ gulp\ =\ require('gulp')}
\DoxyCodeLine{const\ merge2\ =\ require('merge2')}
\DoxyCodeLine{const\ concat\ =\ require('gulp-\/concat')}
\DoxyCodeLine{const\ minifyHtml\ =\ require('gulp-\/minify-\/html')}
\DoxyCodeLine{const\ ngtemplate\ =\ require('gulp-\/ngtemplate')}
\DoxyCodeLine{}
\DoxyCodeLine{gulp.task('app-\/js',\ function\ ()\ \{}
\DoxyCodeLine{\ \ return\ merge2(}
\DoxyCodeLine{\ \ \ \ \ \ gulp.src('static/src/tpl/*.html')}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .pipe(minifyHtml(\{empty:\ true\}))}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .pipe(ngtemplate(\{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ module:\ 'genTemplates',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ standalone:\ true}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \})}
\DoxyCodeLine{\ \ \ \ \ \ ),\ gulp.src([}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/app.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/locale\_zh-\/cn.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/router.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/tools.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/services.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/filters.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/directives.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/controllers.js'}
\DoxyCodeLine{\ \ \ \ \ \ ])}
\DoxyCodeLine{\ \ \ \ )}
\DoxyCodeLine{\ \ \ \ .pipe(concat('app.js'))}
\DoxyCodeLine{\ \ \ \ .pipe(gulp.dest('static/dist/js/'))}
\DoxyCodeLine{\})}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{const\ stream\ =\ merge2([stream1,\ stream2],\ stream3,\ \{end:\ false\})}
\DoxyCodeLine{//...}
\DoxyCodeLine{stream.add(stream4,\ stream5)}
\DoxyCodeLine{//..}
\DoxyCodeLine{stream.end()}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{//\ equal\ to\ merge2([stream1,\ stream2],\ stream3)}
\DoxyCodeLine{const\ stream\ =\ merge2()}
\DoxyCodeLine{stream.add([stream1,\ stream2])}
\DoxyCodeLine{stream.add(stream3)}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{//\ merge\ order:}
\DoxyCodeLine{//\ \ \ 1.\ merge\ \`{}stream1`;}
\DoxyCodeLine{//\ \ \ 2.\ merge\ \`{}stream2`\ and\ \`{}stream3`\ in\ parallel\ after\ \`{}stream1`\ merged;}
\DoxyCodeLine{//\ \ \ 3.\ merge\ 'stream4'\ after\ \`{}stream2`\ and\ \`{}stream3`\ merged;}
\DoxyCodeLine{const\ stream\ =\ merge2(stream1,\ [stream2,\ stream3],\ stream4)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ merge\ order:}
\DoxyCodeLine{//\ \ \ 1.\ merge\ \`{}stream5`\ and\ \`{}stream6`\ in\ parallel\ after\ \`{}stream4`\ merged;}
\DoxyCodeLine{//\ \ \ 2.\ merge\ 'stream7'\ after\ \`{}stream5`\ and\ \`{}stream6`\ merged;}
\DoxyCodeLine{stream.add([stream5,\ stream6],\ stream7)}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{//\ nest\ merge}
\DoxyCodeLine{//\ equal\ to\ merge2(stream1,\ stream2,\ stream6,\ stream3,\ [stream4,\ stream5]);}
\DoxyCodeLine{const\ streamA\ =\ merge2(stream1,\ stream2)}
\DoxyCodeLine{const\ streamB\ =\ merge2(stream3,\ [stream4,\ stream5])}
\DoxyCodeLine{const\ stream\ =\ merge2(streamA,\ streamB)}
\DoxyCodeLine{streamA.add(stream6)}

\end{DoxyCode}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3674}{}\doxysection{\texorpdfstring{API}{API}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3674}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ merge2\ =\ require('merge2')}

\end{DoxyCode}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3675}{}\doxysubsection{\texorpdfstring{merge2()}{merge2()}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3675}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3676}{}\doxysubsection{\texorpdfstring{merge2(options)}{merge2(options)}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3676}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3677}{}\doxysubsection{\texorpdfstring{merge2(stream1, stream2, ..., stream\+N)}{merge2(stream1, stream2, ..., streamN)}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3677}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3678}{}\doxysubsection{\texorpdfstring{merge2(stream1, stream2, ..., stream\+N, options)}{merge2(stream1, stream2, ..., streamN, options)}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3678}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3679}{}\doxysubsection{\texorpdfstring{merge2(stream1, \mbox{[}stream2, stream3, ...\mbox{]}, stream\+N, options)}{merge2(stream1, [stream2, stream3, ...], streamN, options)}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3679}
return a duplex stream (merged\+Stream). streams in array will be merged in parallel.\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3680}{}\doxysubsection{\texorpdfstring{merged\+Stream.\+add(stream)}{mergedStream.add(stream)}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3680}
\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3681}{}\doxysubsection{\texorpdfstring{merged\+Stream.\+add(stream1, \mbox{[}stream2, stream3, ...\mbox{]}, ...)}{mergedStream.add(stream1, [stream2, stream3, ...], ...)}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3681}
return the merged\+Stream.\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3682}{}\doxysubsection{\texorpdfstring{merged\+Stream.\+on(\textquotesingle{}queue\+Drain\textquotesingle{}, function() \{\})}{mergedStream.on('queueDrain', function() \{\})}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3682}
It will emit \textquotesingle{}queue\+Drain\textquotesingle{} when all streams merged. If you set {\ttfamily end === false} in options, this event give you a notice that should add more streams to merge or end the merged\+Stream.\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3683}{}\doxysubsubsection{\texorpdfstring{stream}{stream}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3683}
{\itshape option} Type\+: {\ttfamily Readable} or {\ttfamily Duplex} or {\ttfamily Transform} stream.\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3684}{}\doxysubsubsection{\texorpdfstring{options}{options}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3684}
{\itshape option} Type\+: {\ttfamily Object}.


\begin{DoxyItemize}
\item {\bfseries{end}} -\/ {\ttfamily Boolean} -\/ if {\ttfamily end === false} then merged\+Stream will not be auto ended, you should end by yourself. {\bfseries{Default\+:}} {\ttfamily undefined}
\item {\bfseries{pipe\+Error}} -\/ {\ttfamily Boolean} -\/ if {\ttfamily pipe\+Error === true} then merged\+Stream will emit {\ttfamily error} event from source streams. {\bfseries{Default\+:}} {\ttfamily undefined}
\item {\bfseries{object\+Mode}} -\/ {\ttfamily Boolean} . {\bfseries{Default\+:}} {\ttfamily true}
\end{DoxyItemize}

{\ttfamily object\+Mode} and other options({\ttfamily high\+Water\+Mark}, {\ttfamily default\+Encoding} ...) is same as Node.\+js {\ttfamily Stream}.\hypertarget{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3685}{}\doxysection{\texorpdfstring{License}{License}}\label{md__c_1_2_users_2alexs_2source_2repos_2_s_q_8_term_project_8my_weather_2_s_q_8_term_project_8my_eff8cd91418fe1d8ef48af247608d499_autotoc_md3685}
MIT © \href{https://www.teambition.com}{\texttt{ Teambition}} 